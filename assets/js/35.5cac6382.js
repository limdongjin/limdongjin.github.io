(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{249:function(s,a,n){"use strict";n.r(a);var e=n(2),t=Object(e.a)({},function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"elasticsearch-팁"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-팁","aria-hidden":"true"}},[s._v("#")]),s._v(" Elasticsearch 팁")]),s._v(" "),n("h2",{attrs:{id:"date-detection으로-에러가-난다면"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#date-detection으로-에러가-난다면","aria-hidden":"true"}},[s._v("#")]),s._v(" date_detection으로 에러가 난다면?")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("PUT /mymyindex\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mappings"')]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mymytype"')]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"date_detection"')]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"aws-elasticsearch-service-액세스-정책-설정"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#aws-elasticsearch-service-액세스-정책-설정","aria-hidden":"true"}},[s._v("#")]),s._v(" AWS Elasticsearch Service 액세스 정책 설정")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('// elasticsearch + kibana + cognito 조합 (1)\n// 주의할점: 해당 정책은 cognito를 통해 가입된 유저들은 Elasticsearch에 DELETE, PUT 등의 액션을 수행할수있다.\n\n{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Effect": "Allow",\n      "Principal": {\n        "AWS": "arn:aws:iam::xxxxx:user/도메인이름"\n      },\n      "Action": "es:*",\n      "Resource": "arn:aws:iam::xxxxx:user/도메인이름"\n    },\n    {\n      "Effect": "Allow",\n      "Principal": {\n        "AWS": "arn:aws:iam::xxxxx:role/Cognito_xxxAuth_Role"\n      },\n      "Action": "es:ESHttp*",\n      "Resource": "arn:aws:es:ap-northeast-2:xxxxx:domain/도메인이름/*"\n    }\n  ]\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('// elasticsearch + kibana + cognito 조합 (2)\n// cognito 유저들이 ReadOnly로 접근했으면 좋겠다면 해당 정책을 사용하자\n\n{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Effect": "Allow",\n      "Principal": {\n        "AWS": "arn:aws:iam::xxxxx:user/도메일이름"\n      },\n      "Action": "es:*",\n      "Resource": "arn:aws:iam::xxxxx:user/도메일이름"\n    },\n    {\n      "Effect": "Allow",\n      "Principal": {\n        "AWS": "arn:aws:iam::xxxxx:role/Cognito_xxxAuth_Role"\n      },\n      "Action": [ "es:ESHttpGet", "es:ESHttpPost", "es:ESHttpHead" ],\n      "Resource": "arn:aws:es:ap-northeast-2:xxxxx:domain/도메인이름/*"\n    }\n  ]\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("h2",{attrs:{id:"aws-elasticsearch-service-한글-형태소-분석기-붙이기"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#aws-elasticsearch-service-한글-형태소-분석기-붙이기","aria-hidden":"true"}},[s._v("#")]),s._v(" AWS Elasticsearch Service 한글 형태소 분석기 붙이기")]),s._v(" "),n("p",[s._v("Index를 처음 생성할때 settings에 형태소 분석기를 설정해주면 된다\n(AWS Elasticsearch Service는 seunjeon 형태소 분석기를 지원한다.)")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("{'settings':\n     {'index':\n          {'analysis':\n               {'analyzer':\n                    {'korean':\n                         {\n                             'type': 'custom',\n                             'tokenizer': 'seunjeon_default_tokenizer'\n                          }\n                     },\n                'tokenizer':\n                    {'seunjeon_default_tokenizer':\n                         {\n                             'type': 'seunjeon_tokenizer',\n                             'index_eojeol': False,\n                             'user_words': ['헬로우', '호우']\n                         }\n                    }\n               }\n          }\n     }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("h2",{attrs:{id:"기존-elasticsearch-서버-데이터를-다른-서버의-elascticsearch로-옮기고싶다면"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#기존-elasticsearch-서버-데이터를-다른-서버의-elascticsearch로-옮기고싶다면","aria-hidden":"true"}},[s._v("#")]),s._v(" 기존 Elasticsearch 서버 데이터를 다른 서버의 Elascticsearch로 옮기고싶다면?")]),s._v(" "),n("h3",{attrs:{id:"_1-elasticdump-설치"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-elasticdump-설치","aria-hidden":"true"}},[s._v("#")]),s._v(" 1. elasticdump 설치")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" elasticdump -g\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_2-실행-예제"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-실행-예제","aria-hidden":"true"}},[s._v("#")]),s._v(" 2. 실행 예제")]),s._v(" "),n("p",[s._v("더 다양한 예제는 "),n("a",{attrs:{href:"https://github.com/taskrabbit/elasticsearch-dump",target:"_blank",rel:"noopener noreferrer"}},[s._v("elaticdump 레포지토리"),n("OutboundLink")],1),s._v("에서 확인할수있음.")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("elasticdump \\\n--input"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://old-server.com/myindex \\\n--output"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://new-server.com/myindex\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"references"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#references","aria-hidden":"true"}},[s._v("#")]),s._v(" References")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://docs.aws.amazon.com/ko_kr/elasticsearch-service/latest/developerguide/es-ac.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("AWS Elasticsearch Service 개발자문서 - 액세스 제어 파트"),n("OutboundLink")],1)])])},[],!1,null,null,null);a.default=t.exports}}]);